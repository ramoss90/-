--[[
    ğŸ‡­ğŸ‡ºØ²ÙŠÙƒØ± Ù„Ù„Ø­ÙØ§Ø¸Ø§Øª - 1.9 ğŸ‡®ğŸ‡¶
    ØªØ­Ø³ÙŠÙ†Ø§Øª Ù†Ø¸Ø§Ù… Ø§Ù„ØªØµÙˆÙŠØ¨:
    1. Ù†Ø¸Ø§Ù… ØªØµÙˆÙŠØ¨ Ø¬Ø¯ÙŠØ¯ "Ø¨Ø±Ø§Ø³ ÙØ§Ø¯ÙŠ Ø§Ù„ÙˆØµØ®"
    2. ØªØªØ¨Ø¹ Ø°ÙƒÙŠ Ù…Ø¹ ØªÙ†Ø¨Ø¤ Ø­Ø±ÙƒØ© Ø§Ù„Ø£Ù‡Ø¯Ø§Ù
    3. ÙØ­Øµ Ø§Ù„Ø±Ø¤ÙŠØ© Ø¨Ø£Ø´Ø¹Ø© Ø§Ù„ØªØ£ÙƒØ¯
    4. Ø¯Ø§Ø¦Ø±Ø© ØªØµÙˆÙŠØ¨ Ø£Ø±Ø¬ÙˆØ§Ù†ÙŠØ© Ù…Ù…ÙŠØ²Ø©
--]]

-- Ø®Ø¯Ù…Ø§Øª Ø§Ù„Ø±ÙˆØ¨Ù„ÙƒØ³ Ø§Ù„Ø£Ø³Ø§Ø³ÙŠØ©
local Players = game:GetService("Players")
local Lighting = game:GetService("Lighting")
local RunService = game:GetService("RunService")
local TweenService = game:GetService("TweenService")
local UserInputService = game:GetService("UserInputService")
local Workspace = game:GetService("Workspace")

-- Ù…ØªØºÙŠØ±Ø§Øª Ø§Ù„Ù„Ø§Ø¹Ø¨
local Player = Players.LocalPlayer
local PlayerGui = Player:WaitForChild("PlayerGui")
local Camera = Workspace.CurrentCamera

-- Ø¥Ù†Ø´Ø§Ø¡ ÙˆØ§Ø¬Ù‡Ø© Ø§Ù„Ù…Ø³ØªØ®Ø¯Ù… Ø§Ù„Ø±Ø¦ÙŠØ³ÙŠØ©
local ZikerUI = Instance.new("ScreenGui")
ZikerUI.Name = "ZikerPreservationV9"
ZikerUI.ResetOnSpawn = false
ZikerUI.ZIndexBehavior = Enum.ZIndexBehavior.Sibling
ZikerUI.Parent = PlayerGui

-- Ø¥Ù†Ø´Ø§Ø¡ Ø§Ù„Ø¯Ø§Ø¦Ø±Ø© Ø§Ù„Ø³ÙˆØ¯Ø§Ø¡
local Circle = Instance.new("Frame")
Circle.Name = "DragCircle"
Circle.Size = UDim2.new(0, 45, 0, 45)
Circle.Position = UDim2.new(0, 20, 0.5, 0)
Circle.AnchorPoint = Vector2.new(0, 0.5)
Circle.BackgroundColor3 = Color3.new(0, 0, 0)
Circle.BorderSizePixel = 0
Circle.ZIndex = 10

-- Ø¬Ø¹Ù„ Ø§Ù„Ø¯Ø§Ø¦Ø±Ø© Ù…Ø³ØªØ¯ÙŠØ±Ø©
local UICorner = Instance.new("UICorner")
UICorner.CornerRadius = UDim.new(1, 0)
UICorner.Parent = Circle

-- Ø¥Ø¶Ø§ÙØ© Ø¸Ù„ Ù„Ù„Ø¯Ø§Ø¦Ø±Ø©
local UIStroke = Instance.new("UIStroke")
UIStroke.Color = Color3.new(1, 1, 1)
UIStroke.Thickness = 1.5
UIStroke.Parent = Circle

-- Ø¥Ø¶Ø§ÙØ© Ø§Ù„Ø¯Ø§Ø¦Ø±Ø© Ø¥Ù„Ù‰ Ø§Ù„ÙˆØ§Ø¬Ù‡Ø©
Circle.Parent = ZikerUI

-- Ø¥Ù†Ø´Ø§Ø¡ ÙˆØ§Ø¬Ù‡Ø© Ø§Ù„Ù…Ø³ØªØ®Ø¯Ù…
local MainFrame = Instance.new("Frame")
MainFrame.Name = "MainFrame"
MainFrame.Size = UDim2.new(0, 300, 0, 230)
MainFrame.Position = UDim2.new(0.5, 0, 0.5, 0)
MainFrame.AnchorPoint = Vector2.new(0.5, 0.5)
MainFrame.BackgroundColor3 = Color3.fromRGB(30, 30, 30)
MainFrame.BorderSizePixel = 0
MainFrame.ClipsDescendants = true
MainFrame.Visible = false

-- Ø²ÙˆØ§ÙŠØ§ Ù…Ø³ØªØ¯ÙŠØ±Ø© Ù„Ù„ÙˆØ§Ø¬Ù‡Ø©
local FrameCorner = Instance.new("UICorner")
FrameCorner.CornerRadius = UDim.new(0, 12)
FrameCorner.Parent = MainFrame

-- Ø¸Ù„ Ù„Ù„ÙˆØ§Ø¬Ù‡Ø©
local FrameShadow = Instance.new("UIStroke")
FrameShadow.Color = Color3.fromRGB(70, 70, 70)
FrameShadow.Thickness = 2
FrameShadow.Parent = MainFrame

-- Ø¥Ø¶Ø§ÙØ© Ø§Ù„ÙˆØ§Ø¬Ù‡Ø© Ø¥Ù„Ù‰ Ø§Ù„Ø´Ø§Ø´Ø©
MainFrame.Parent = ZikerUI

-- Ø¹Ù†Ø§ØµØ± Ø§Ù„ÙˆØ§Ø¬Ù‡Ø©
local Title = Instance.new("TextLabel")
Title.Name = "Title"
Title.Size = UDim2.new(1, 0, 0, 40)
Title.BackgroundColor3 = Color3.fromRGB(20, 20, 20)
Title.Text = "ğŸ‡­ğŸ‡ºØ²ÙŠÙƒØ± Ù„Ù„Ø­ÙØ§Ø¸Ø§Øª - 1.9 ğŸ‡®ğŸ‡¶"
Title.TextColor3 = Color3.new(1, 1, 1)
Title.Font = Enum.Font.GothamBold
Title.TextSize = 16
Title.Parent = MainFrame

-- Ø²Ø§ÙˆÙŠØ© Ù…Ø³ØªØ¯ÙŠØ±Ø© Ù„Ù„Ø¹Ù†ÙˆØ§Ù†
local TitleCorner = Instance.new("UICorner")
TitleCorner.CornerRadius = UDim.new(0, 12)
TitleCorner.Parent = Title

-- Ø²Ø± Ø§Ù„Ø±Ø¤ÙŠØ© Ø§Ù„Ù„ÙŠÙ„ÙŠØ©
local NightVisionButton = Instance.new("TextButton")
NightVisionButton.Name = "NightVision"
NightVisionButton.Size = UDim2.new(0.9, 0, 0, 40)
NightVisionButton.Position = UDim2.new(0.05, 0, 0.25, 0)
NightVisionButton.BackgroundColor3 = Color3.fromRGB(50, 50, 50)
NightVisionButton.Text = "ØªØ±ÙŠØ¯ ØªØ´ÙˆÙ Ø¨Ù„ÙŠÙ„ØŸ: ØºÙŠØ± Ù…ÙØ¹Ù„"
NightVisionButton.TextColor3 = Color3.new(1, 1, 1)
NightVisionButton.Font = Enum.Font.Gotham
NightVisionButton.TextSize = 14
NightVisionButton.Parent = MainFrame

-- Ø²Ø§ÙˆÙŠØ© Ù…Ø³ØªØ¯ÙŠØ±Ø© Ù„Ù„Ø²Ø±
local ButtonCorner = Instance.new("UICorner")
ButtonCorner.CornerRadius = UDim.new(0, 10)
ButtonCorner.Parent = NightVisionButton

-- Ø²Ø± Ø§Ù„ØªØµÙˆÙŠØ¨ Ø§Ù„ØªÙ„Ù‚Ø§Ø¦ÙŠ
local AimBotButton = Instance.new("TextButton")
AimBotButton.Name = "AimBot"
AimBotButton.Size = UDim2.new(0.9, 0, 0, 40)
AimBotButton.Position = UDim2.new(0.05, 0, 0.55, 0)
AimBotButton.BackgroundColor3 = Color3.fromRGB(50, 50, 50)
AimBotButton.Text = "ØªØµÙˆÙŠØ¨ Ø¨Ø±Ø§Ø³ ÙØ§Ø¯ÙŠ Ø§Ù„ÙˆØµØ®: ØºÙŠØ± Ù…ÙØ¹Ù„"
AimBotButton.TextColor3 = Color3.new(1, 1, 1)
AimBotButton.Font = Enum.Font.Gotham
AimBotButton.TextSize = 14
AimBotButton.Parent = MainFrame

-- Ø²Ø§ÙˆÙŠØ© Ù…Ø³ØªØ¯ÙŠØ±Ø© Ù„Ù„Ø²Ø±
local AimBotCorner = Instance.new("UICorner")
AimBotCorner.CornerRadius = UDim.new(0, 10)
AimBotCorner.Parent = AimBotButton

-- Ù…ØªØºÙŠØ±Ø§Øª Ø§Ù„Ù†Ø¸Ø§Ù…
local isUIOpen = false
local isDragging = false
local dragStartPos, frameStartPos
local isNightVisionActive = false
local lastMemoryClean = os.clock()
local nightVisionLoop = nil

-- Ù†Ø¸Ø§Ù… ØªØµÙˆÙŠØ¨ Ø¨Ø±Ø§Ø³ ÙØ§Ø¯ÙŠ Ø§Ù„ÙˆØµØ®
local fov = 136
local isAiming = false
local validNPCs = {}
local raycastParams = RaycastParams.new()
raycastParams.FilterType = Enum.RaycastFilterType.Blacklist

-- Ø¯Ø§Ø¦Ø±Ø© ØªØµÙˆÙŠØ¨ Ø£Ø±Ø¬ÙˆØ§Ù†ÙŠØ©
local FOVring = Drawing.new("Circle")
FOVring.Visible = false
FOVring.Thickness = 2
FOVring.Color = Color3.fromRGB(128, 0, 128)
FOVring.Filled = false
FOVring.Radius = fov
FOVring.Position = Camera.ViewportSize / 2

-- ÙˆØ¸ÙŠÙØ© Ø§Ù„Ø³Ø­Ø¨ Ù„Ù„Ù‡ÙˆØ§ØªÙ
local function handleTouchInput(input, processed)
    if processed then return end
    
    if input.UserInputType == Enum.UserInputType.Touch then
        local touchPos = input.Position
        local circlePos = Circle.AbsolutePosition
        local circleSize = Circle.AbsoluteSize
        
        -- Ø§Ù„ØªØ­Ù‚Ù‚ Ø¥Ø°Ø§ ÙƒØ§Ù†Øª Ø§Ù„Ù„Ù…Ø³Ø© Ø¯Ø§Ø®Ù„ Ø§Ù„Ø¯Ø§Ø¦Ø±Ø©
        if touchPos.X >= circlePos.X and touchPos.X <= circlePos.X + circleSize.X and
           touchPos.Y >= circlePos.Y and touchPos.Y <= circlePos.Y + circleSize.Y then
           
            if input.UserInputState == Enum.UserInputState.Begin then
                isDragging = true
                dragStartPos = Vector2.new(touchPos.X, touchPos.Y)
                frameStartPos = Circle.Position
            elseif input.UserInputState == Enum.UserInputState.End then
                isDragging = false
                
                -- ØªØ¨Ø¯ÙŠÙ„ Ø­Ø§Ù„Ø© Ø§Ù„ÙˆØ§Ø¬Ù‡Ø© Ø¹Ù†Ø¯ Ø§Ù„Ù†Ù‚Ø±
                isUIOpen = not isUIOpen
                
                -- ØªØ£Ø«ÙŠØ± Ø§Ù„ØªØ¨Ø§ÙŠÙ† Ø¹Ù†Ø¯ Ø§Ù„ÙØªØ­/Ø§Ù„Ø¥ØºÙ„Ø§Ù‚
                if isUIOpen then
                    MainFrame.Size = UDim2.new(0, 0, 0, 0)
                    MainFrame.Visible = true
                    TweenService:Create(
                        MainFrame,
                        TweenInfo.new(0.3, Enum.EasingStyle.Quad),
                        {Size = UDim2.new(0, 300, 0, 230)}
                    ):Play()
                else
                    local closeTween = TweenService:Create(
                        MainFrame,
                        TweenInfo.new(0.3, Enum.EasingStyle.Quad),
                        {Size = UDim2.new(0, 0, 0, 0)}
                    )
                    closeTween:Play()
                    closeTween.Completed:Wait()
                    MainFrame.Visible = false
                end
            end
        end
        
        -- Ø§Ù„Ø³Ø­Ø¨ Ø£Ø«Ù†Ø§Ø¡ Ø§Ù„Ø­Ø±ÙƒØ©
        if isDragging and input.UserInputState == Enum.UserInputState.Change then
            local delta = Vector2.new(touchPos.X, touchPos.Y) - dragStartPos
            Circle.Position = UDim2.new(
                frameStartPos.X.Scale,
                frameStartPos.X.Offset + delta.X,
                frameStartPos.Y.Scale,
                frameStartPos.Y.Offset + delta.Y
            )
        end
    end
end

-- ØªØ³Ø¬ÙŠÙ„ Ø£Ø­Ø¯Ø§Ø« Ø§Ù„Ù„Ù…Ø³
UserInputService.InputChanged:Connect(handleTouchInput)
UserInputService.InputBegan:Connect(handleTouchInput)
UserInputService.InputEnded:Connect(handleTouchInput)

-- ØªØ®Ø²ÙŠÙ† Ø§Ù„Ø¥Ø¹Ø¯Ø§Ø¯Ø§Øª Ø§Ù„Ø£ØµÙ„ÙŠØ©
local originalClockTime = Lighting.ClockTime
local originalBrightness = Lighting.Brightness
local originalAmbient = Lighting.Ambient
local originalOutdoorAmbient = Lighting.OutdoorAmbient
local originalColorShiftTop = Lighting.ColorShift_Top
local originalColorShiftBottom = Lighting.ColorShift_Bottom
local originalFogEnd = Lighting.FogEnd
local originalFogStart = Lighting.FogStart

-- Ù†Ø¸Ø§Ù… Ø§Ù„Ø±Ø¤ÙŠØ© Ø§Ù„Ù„ÙŠÙ„ÙŠØ© Ø§Ù„Ù…ØªØ·ÙˆØ± Ù…Ø¹ Ø§Ù„ØªØ«Ø¨ÙŠØª Ø§Ù„Ø¯Ø§Ø¦Ù…
local function ApplyNightVision()
    -- ØªÙØ¹ÙŠÙ„ ØªØ£Ø«ÙŠØ± Ø§Ù„Ø±Ø¤ÙŠØ© Ø§Ù„Ù„ÙŠÙ„ÙŠØ© Ø§Ù„Ù…ØªØ·ÙˆØ±
    Lighting.ClockTime = 14 -- ØªØ«Ø¨ÙŠØª Ø§Ù„ÙˆÙ‚Øª Ø¹Ù„Ù‰ 2 Ø¸Ù‡Ø±Ø§Ù‹
    Lighting.Brightness = 2
    Lighting.Ambient = Color3.new(1, 1, 1)
    Lighting.OutdoorAmbient = Color3.new(1, 1, 1)
    Lighting.ColorShift_Top = Color3.new(0, 0, 0)
    Lighting.ColorShift_Bottom = Color3.new(0, 0, 0)
    Lighting.FogEnd = 100000 -- Ø¥Ø²Ø§Ù„Ø© Ø§Ù„Ø¶Ø¨Ø§Ø¨
    Lighting.FogStart = 0
    
    -- ØªØ­Ø¯ÙŠØ« Ø§Ù„ÙˆØ§Ø¬Ù‡Ø©
    NightVisionButton.Text = "ØªØ±ÙŠØ¯ ØªØ´ÙˆÙ Ø¨Ù„ÙŠÙ„ØŸ: Ù…ÙØ¹Ù„"
    NightVisionButton.BackgroundColor3 = Color3.fromRGB(0, 120, 0)
end

-- ØªÙØ¹ÙŠÙ„/Ø¥Ù„ØºØ§Ø¡ Ø§Ù„Ø±Ø¤ÙŠØ© Ø§Ù„Ù„ÙŠÙ„ÙŠØ©
NightVisionButton.Activated:Connect(function()
    isNightVisionActive = not isNightVisionActive
    
    if isNightVisionActive then
        NightVisionButton.Text = "Ø¬Ø§Ø± Ø§Ù„ØªÙØ¹ÙŠÙ„..."
        
        -- Ø¥ÙŠÙ‚Ø§Ù Ø£ÙŠ Ø­Ù„Ù‚Ø© Ø³Ø§Ø¨Ù‚Ø© Ø¥Ù† ÙˆØ¬Ø¯Øª
        if nightVisionLoop then
            nightVisionLoop:Disconnect()
            nightVisionLoop = nil
        end
        
        -- ØªØ·Ø¨ÙŠÙ‚ Ø§Ù„Ø±Ø¤ÙŠØ© Ø§Ù„Ù„ÙŠÙ„ÙŠØ© ÙÙˆØ±Ø§Ù‹
        ApplyNightVision()
        
        -- Ø¨Ø¯Ø¡ Ø­Ù„Ù‚Ø© Ø§Ù„ØªØ­Ø¯ÙŠØ« Ø§Ù„Ù…Ø³ØªÙ…Ø± Ù„ØªØ«Ø¨ÙŠØª Ø§Ù„Ø¥Ø¹Ø¯Ø§Ø¯Ø§Øª
        nightVisionLoop = RunService.Heartbeat:Connect(function()
            ApplyNightVision()
            task.wait(5) -- ØªØ­Ø¯ÙŠØ« ÙƒÙ„ 5 Ø«ÙˆØ§Ù†Ù
        end)
    else
        -- Ø¥ÙŠÙ‚Ø§Ù Ø­Ù„Ù‚Ø© Ø§Ù„ØªØ­Ø¯ÙŠØ«
        if nightVisionLoop then
            nightVisionLoop:Disconnect()
            nightVisionLoop = nil
        end
        
        -- Ø¥Ø¹Ø§Ø¯Ø© Ø§Ù„Ø¥Ø¹Ø¯Ø§Ø¯Ø§Øª Ø§Ù„Ø£ØµÙ„ÙŠØ©
        Lighting.ClockTime = originalClockTime
        Lighting.Brightness = originalBrightness
        Lighting.Ambient = originalAmbient
        Lighting.OutdoorAmbient = originalOutdoorAmbient
        Lighting.ColorShift_Top = originalColorShiftTop
        Lighting.ColorShift_Bottom = originalColorShiftBottom
        Lighting.FogEnd = originalFogEnd
        Lighting.FogStart = originalFogStart
        
        NightVisionButton.Text = "ØªØ±ÙŠØ¯ ØªØ´ÙˆÙ Ø¨Ù„ÙŠÙ„ØŸ: ØºÙŠØ± Ù…ÙØ¹Ù„"
        NightVisionButton.BackgroundColor3 = Color3.fromRGB(50, 50, 50)
    end
end)

-- =============================================
-- Ù†Ø¸Ø§Ù… ØªØµÙˆÙŠØ¨ Ø¨Ø±Ø§Ø³ ÙØ§Ø¯ÙŠ Ø§Ù„ÙˆØµØ® (Ù†Ø³Ø®Ø© Ù…Ø·ÙˆØ±Ø©)
-- =============================================

-- ØªØ­Ø¯ÙŠØ¯ Ø¥Ø°Ø§ ÙƒØ§Ù† Ø§Ù„Ù†Ù…ÙˆØ°Ø¬ Ø²ÙˆÙ…Ø¨ÙŠ
local function isNPC(obj)
    return obj:IsA("Model") 
        and obj:FindFirstChild("Humanoid")
        and obj.Humanoid.Health > 0
        and obj:FindFirstChild("Head")
        and obj:FindFirstChild("HumanoidRootPart")
        and not Players:GetPlayerFromCharacter(obj)
end

-- ØªØ­Ø¯ÙŠØ« Ù‚Ø§Ø¦Ù…Ø© Ø§Ù„Ø²ÙˆÙ…Ø¨ÙŠ
local function updateNPCs()
    local tempTable = {}
    for _, obj in ipairs(Workspace:GetDescendants()) do
        if isNPC(obj) then
            tempTable[obj] = true
        end
    end
    for i = #validNPCs, 1, -1 do
        if not tempTable[validNPCs[i]] then
            table.remove(validNPCs, i)
        end
    end
    for obj in pairs(tempTable) do
        if not table.find(validNPCs, obj) then
            table.insert(validNPCs, obj)
        end
    end
end

-- Ø¥Ø¶Ø§ÙØ© Ø²ÙˆÙ…Ø¨ÙŠ Ø¬Ø¯ÙŠØ¯
local function handleDescendant(descendant)
    if isNPC(descendant) then
        table.insert(validNPCs, descendant)
        local humanoid = descendant:WaitForChild("Humanoid")
        humanoid.Destroying:Connect(function()
            for i = #validNPCs, 1, -1 do
                if validNPCs[i] == descendant then
                    table.remove(validNPCs, i)
                    break
                end
            end
        end)
    end
end

-- ØªØ­Ø¯ÙŠØ« Ø±Ø³ÙˆÙ…Ø§Øª Ø§Ù„ØªØµÙˆÙŠØ¨
local function updateDrawings()
    FOVring.Position = Camera.ViewportSize / 2
    FOVring.Radius = fov * (Camera.ViewportSize.Y / 1080)
end

-- ØªÙ†Ø¨Ø¤ Ø­Ø±ÙƒØ© Ø§Ù„Ù‡Ø¯Ù
local function predictPos(target)
    local rootPart = target:FindFirstChild("HumanoidRootPart")
    local head = target:FindFirstChild("Head")
    if not rootPart or not head then
        return head and head.Position or rootPart and rootPart.Position
    end
    local velocity = rootPart.Velocity
    local predictionTime = 0.02
    local basePosition = rootPart.Position + velocity * predictionTime
    local headOffset = head.Position - rootPart.Position
    return basePosition + headOffset
end

-- Ø§Ù„Ø­ØµÙˆÙ„ Ø¹Ù„Ù‰ Ø£ÙØ¶Ù„ Ù‡Ø¯Ù
local function getTarget()
    local nearest = nil
    local minDistance = math.huge
    local viewportCenter = Camera.ViewportSize / 2
    raycastParams.FilterDescendantsInstances = {Player.Character}
    for _, npc in ipairs(validNPCs) do
        local predictedPos = predictPos(npc)
        local screenPos, visible = Camera:WorldToViewportPoint(predictedPos)
        if visible and screenPos.Z > 0 then
            local ray = Workspace:Raycast(
                Camera.CFrame.Position,
                (predictedPos - Camera.CFrame.Position).Unit * 1000,
                raycastParams
            )
            if ray and ray.Instance:IsDescendantOf(npc) then
                local distance = (Vector2.new(screenPos.X, screenPos.Y) - viewportCenter).Magnitude
                if distance < minDistance and distance < fov then
                    minDistance = distance
                    nearest = npc
                end
            end
        end
    end
    return nearest
end

-- ØªÙˆØ¬ÙŠÙ‡ Ø§Ù„ØªØµÙˆÙŠØ¨
local function aim(targetPosition)
    local currentCF = Camera.CFrame
    local targetDirection = (targetPosition - currentCF.Position).Unit
    local smoothFactor = 0.581
    local newLookVector = currentCF.LookVector:Lerp(targetDirection, smoothFactor)
    Camera.CFrame = CFrame.new(currentCF.Position, currentCF.Position + newLookVector)
end

-- ØªÙØ¹ÙŠÙ„/Ø¥Ù„ØºØ§Ø¡ Ø§Ù„ØªØµÙˆÙŠØ¨
local function toggleAimbot()
    isAiming = not isAiming
    FOVring.Visible = isAiming
    AimBotButton.Text = "ØªØµÙˆÙŠØ¨ Ø¨Ø±Ø§Ø³ ÙØ§Ø¯ÙŠ Ø§Ù„ÙˆØµØ®: " .. (isAiming and "Ù…ÙØ¹Ù„" or "ØºÙŠØ± Ù…ÙØ¹Ù„")
    AimBotButton.TextColor3 = isAiming and Color3.fromRGB(50, 255, 50) or Color3.fromRGB(255, 50, 50)
    AimBotButton.BackgroundColor3 = isAiming and Color3.fromRGB(0, 120, 0) or Color3.fromRGB(50, 50, 50)
end

-- Ø­Ø¯Ø« ØªÙØ¹ÙŠÙ„ Ø²Ø± Ø§Ù„ØªØµÙˆÙŠØ¨
AimBotButton.Activated:Connect(toggleAimbot)

-- Ù…ÙØ§ØªÙŠØ­ Ø§Ù„Ø§Ø®ØªØµØ§Ø±
UserInputService.InputBegan:Connect(function(input, gameProcessed)
    if not gameProcessed and input.KeyCode == Enum.KeyCode.T then
        toggleAimbot()
    end
end)

-- ØªØ­Ø¯ÙŠØ« Ù…Ø³ØªÙ…Ø±
local lastUpdate = 0
local UPDATE_INTERVAL = 0.4

RunService.Heartbeat:Connect(function(dt)
    updateDrawings()
    lastUpdate = lastUpdate + dt
    if lastUpdate >= UPDATE_INTERVAL then
        updateNPCs()
        lastUpdate = 0
    end
    if isAiming then
        local target = getTarget()
        if target then
            local predictedPosition = predictPos(target)
            aim(predictedPosition)
        end
    end
end)

-- Ø¥Ø¹Ø¯Ø§Ø¯ Ø£ÙˆÙ„ÙŠ
updateNPCs()

-- Ø£Ø­Ø¯Ø§Ø« ØªØ­Ø¯ÙŠØ« Ø§Ù„Ø²ÙˆÙ…Ø¨ÙŠ
Workspace.DescendantAdded:Connect(handleDescendant)
Workspace.DescendantRemoved:Connect(function(descendant)
    if isNPC(descendant) then
        for i = #validNPCs, 1, -1 do
            if validNPCs[i] == descendant then
                table.remove(validNPCs, i)
                break
            end
        end
    end
end)

-- ØªÙ†Ø¸ÙŠÙ Ø¹Ù†Ø¯ Ø§Ù„Ø®Ø±ÙˆØ¬
Players.PlayerRemoving:Connect(function(leavingPlayer)
    if leavingPlayer == Player then
        FOVring:Remove()
    end
end)

-- Ù…Ù†Ø¸Ù Ø°Ø§ÙƒØ±Ø© Ù…ØªØ·ÙˆØ± (Ù„Ø§ ÙŠØ¤Ø«Ø± Ø¹Ù„Ù‰ Ø§Ù„ÙˆØ¸Ø§Ø¦Ù)
local function SmartMemoryCleaner()
    while true do
        task.wait(180) -- ØªÙ†Ø¸ÙŠÙ Ø§Ù„Ø°Ø§ÙƒØ±Ø© ÙƒÙ„ 3 Ø¯Ù‚Ø§Ø¦Ù‚
        
        -- ØªØ¬Ù†Ø¨ Ø§Ù„ØªÙ†Ø¸ÙŠÙ Ø£Ø«Ù†Ø§Ø¡ ØªÙØ¹ÙŠÙ„ Ø§Ù„Ù…ÙŠØ²Ø§Øª
        if not isNightVisionActive then
            -- ØªÙ†Ø¸ÙŠÙ Ø§Ù„Ø°Ø§ÙƒØ±Ø© ÙÙ‚Ø· Ø¹Ù†Ø¯Ù…Ø§ Ù„Ø§ ØªÙƒÙˆÙ† Ø§Ù„Ù…ÙŠØ²Ø§Øª Ù†Ø´Ø·Ø©
            collectgarbage("collect")
            lastMemoryClean = os.clock()
            
            -- ØªÙ†Ø¸ÙŠÙ Ø¥Ø¶Ø§ÙÙŠ Ø¢Ù…Ù†
            for _, v in ipairs(PlayerGui:GetChildren()) do
                if v:IsA("ScreenGui") and v.Name ~= "ZikerPreservationV9" then
                    v:Destroy()
                end
            end
        end
    end
end

-- Ø¨Ø¯Ø¡ Ù…Ù†Ø¸Ù Ø§Ù„Ø°Ø§ÙƒØ±Ø©
task.spawn(SmartMemoryCleaner)

-- Ø§Ù„ØªØ£ÙƒØ¯ Ù…Ù† Ø¥ØºÙ„Ø§Ù‚ Ø§Ù„ÙˆØ§Ø¬Ù‡Ø© Ø¹Ù†Ø¯ Ø¥Ø¹Ø§Ø¯Ø© Ø§Ù„Ø¨Ø¯Ø§ÙŠØ©
Player.CharacterAdded:Connect(function()
    MainFrame.Visible = false
    isUIOpen = false
end)

-- ØªØ­Ø³ÙŠÙ†Ø§Øª Ù„Ù„Ø£Ø¯Ø§Ø¡ Ø¹Ù„Ù‰ Ø§Ù„Ù‡ÙˆØ§ØªÙ
RunService.Heartbeat:Connect(function()
    if isDragging then
        -- ØªÙ‚Ù„ÙŠÙ„ ØªØ­Ø¯ÙŠØ«Ø§Øª Ø§Ù„Ø³Ø­Ø¨ Ø£Ø«Ù†Ø§Ø¡ Ø§Ù„Ø­Ø±ÙƒØ©
        task.wait(0.1)
    end
end)

-- Ø±Ø³Ø§Ù„Ø© ØªÙØ¹ÙŠÙ„
print("ØªÙ… ØªØ­Ù…ÙŠÙ„ Ø³ÙƒØ±Ø¨Øª ğŸ‡­ğŸ‡ºØ²ÙŠÙƒØ± Ù„Ù„Ø­ÙØ§Ø¸Ø§Øª - 1.9 ğŸ‡®ğŸ‡¶")
print("âœ… Ù†Ø¸Ø§Ù… ØªØµÙˆÙŠØ¨ Ø¨Ø±Ø§Ø³ ÙØ§Ø¯ÙŠ Ø§Ù„ÙˆØµØ® Ø¬Ø§Ù‡Ø²!")
